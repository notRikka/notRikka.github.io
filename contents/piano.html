<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="author" content="qdu software">
<title>钢琴演奏</title>
<base href="" target="_blank">
<style>
body { text-align: center; position: relative; }
#h { color: red; }
#piano {
  position: relative;
  display: inline-block;
}

.pressed {
  background-color: red;
  opacity: 0.5;
  position: absolute;
  z-index: 10;
  pointer-events: none;
}
</style>
<script>
const pressedKeys = {};

function play(id){
  var audio = document.getElementById(id);
  if (!audio.paused) {
    audio.pause();
    audio.currentTime = 0;
  }
  audio.play();
}

function pressKey(id, coords) {
  var piano = document.getElementById('piano');
  
  if (pressedKeys[id]) return;
  
  var overlay = document.createElement('div');
  
  overlay.classList.add("pressed");
  overlay.style.left = coords[0] + 'px';
  overlay.style.top = coords[1] + 'px';
  overlay.style.width = (coords[2] - coords[0]) + 'px';
  overlay.style.height = (coords[3] - coords[1]) + 'px';
  
  overlay.setAttribute('data-key', id);
  
  piano.appendChild(overlay);

  pressedKeys[id] = overlay;

  play(id);
}

function releaseKey(id) {
  if (pressedKeys[id]) {
    pressedKeys[id].remove();
    delete pressedKeys[id];
  }
}
</script>
</head>
<body>
<h1 id="h">钢琴演奏</h1>
<audio id="a1" src="musics/m1.wav"></audio>
<audio id="a2" src="musics/m2.wav"></audio>
<audio id="a3" src="musics/m3.wav"></audio>
<audio id="a4" src="musics/m4.wav"></audio>
<audio id="a5" src="musics/m5.wav"></audio>
<audio id="a6" src="musics/m6.wav"></audio>
<audio id="a7" src="musics/m7.wav"></audio>
<audio id="a8" src="musics/m8.wav"></audio>
<audio id="a9" src="musics/m9.wav"></audio>
<audio id="a10" src="musics/m10.wav"></audio>
<audio id="a11" src="musics/m11.wav"></audio>
<audio id="a12" src="musics/m12.wav"></audio>
<audio id="a13" src="musics/m13.wav"></audio>
<audio id="a14" src="musics/m14.wav"></audio>
<audio id="a15" src="musics/m15.wav"></audio>
<audio id="a16" src="musics/m16.wav"></audio>
<audio id="a17" src="musics/m17.wav"></audio>
<audio id="a18" src="musics/m18.wav"></audio>
<audio id="a19" src="musics/m19.wav"></audio>
<audio id="a20" src="musics/m20.wav"></audio>
<audio id="a21" src="musics/m21.wav"></audio>
<audio id="a22" src="musics/m22.wav"></audio>
<audio id="a23" src="musics/m23.wav"></audio>
<audio id="a24" src="musics/m24.wav"></audio>
<div id="piano">
  <img src="pics/piano.jpg" usemap="#piano">
  <map id="piano">
    <area id="key1" shape="rect" coords="66,302,141,446" 
          onmousedown="pressKey('a1', [66, 302, 141, 446]);" 
          onmouseup="releaseKey('a1');">
    <area id="key2" shape="rect" coords="121,66,166,302" 
          onmousedown="pressKey('a2', [121, 66, 166, 302]);" 
          onmouseup="releaseKey('a2');">
    <area id="key3" shape="rect" coords="146,302,224,446" 
          onmousedown="pressKey('a3', [146, 302, 224, 446]);" 
          onmouseup="releaseKey('a3');">
    <area id="key4" shape="rect" coords="212,66,254,302" 
          onmousedown="pressKey('a4', [212, 66, 254, 302]);" 
          onmouseup="releaseKey('a4');">
    <area id="key5" shape="rect" coords="228,302,306,446" 
          onmousedown="pressKey('a5', [228, 302, 306, 446]);" 
          onmouseup="releaseKey('a5');">
    <area id="key6" shape="rect" coords="310,302,392,446" 
          onmousedown="pressKey('a6', [310, 302, 392, 446]);" 
          onmouseup="releaseKey('a6');">
    <area id="key7" shape="rect" coords="364,66,411,302" 
          onmousedown="pressKey('a7', [364, 66, 411, 302]);" 
          onmouseup="releaseKey('a7');">
    <area id="key8" shape="rect" coords="396,302,474,446" 
          onmousedown="pressKey('a8', [396, 302, 474, 446]);" 
          onmouseup="releaseKey('a8');">
    <area id="key9" shape="rect" coords="452,66,496,302" 
          onmousedown="pressKey('a9', [452, 66, 496, 302]);" 
          onmouseup="releaseKey('a9');">
    <area id="key10" shape="rect" coords="476,302,556,446" 
          onmousedown="pressKey('a10', [476, 302, 556, 446]);" 
          onmouseup="releaseKey('a10');">
    <area id="key11" shape="rect" coords="541,66,582,302" 
          onmousedown="pressKey('a11', [541, 66, 582, 302]);" 
          onmouseup="releaseKey('a11');">
    <area id="key12" shape="rect" coords="561,302,640,446" 
          onmousedown="pressKey('a12', [561, 302, 640, 446]);" 
          onmouseup="releaseKey('a12');">
    <area id="key13" shape="rect" coords="644,302,725,446" 
          onmousedown="pressKey('a13', [644, 302, 725, 446]);" 
          onmouseup="releaseKey('a13');">
    <area id="key14" shape="rect" coords="699,66,746,302" 
          onmousedown="pressKey('a14', [699, 66, 746, 302]);" 
          onmouseup="releaseKey('a14');">
    <area id="key15" shape="rect" coords="727,302,808,446" 
          onmousedown="pressKey('a15', [727, 302, 808, 446]);" 
          onmouseup="releaseKey('a15');">
    <area id="key16" shape="rect" coords="787,66,836,302" 
          onmousedown="pressKey('a16', [787, 66, 836, 302]);" 
          onmouseup="releaseKey('a16');">
    <area id="key17" shape="rect" coords="810,302,890,446" 
          onmousedown="pressKey('a17', [810, 302, 890, 446]);" 
          onmouseup="releaseKey('a17');">
    <area id="key18" shape="rect" coords="890,302,972,446" 
          onmousedown="pressKey('a18', [890, 302, 972, 446]);" 
          onmouseup="releaseKey('a18');">
    <area id="key19" shape="rect" coords="938,66,989,302"   
          onmousedown="pressKey('a19', [938, 66, 989, 302]);" 
          onmouseup="releaseKey('a19');">
    <area id="key20" shape="rect" coords="972,302,1056,446"  
          onmousedown="pressKey('a20', [972, 302, 1056, 446]);" 
          onmouseup="releaseKey('a20');">
    <area id="key21" shape="rect" coords="1024,66,1076,302"  
          onmousedown="pressKey('a21', [1024, 66, 1076, 302]);" 
          onmouseup="releaseKey('a21');">
    <area id="key22" shape="rect" coords="1056,302,1136,446"  
          onmousedown="pressKey('a22', [1056, 302, 1136, 446]);" 
          onmouseup="releaseKey('a22');">
    <area id="key23" shape="rect" coords="1110,66,1160,302"  
          onmousedown="pressKey('a23', [1110, 66, 1160, 302]);" 
          onmouseup="releaseKey('a23');">
    <area id="key24" shape="rect" coords="1136,302,1219,446"  
          onmousedown="pressKey('a24', [1136, 302, 1219, 446]);" 
          onmouseup="releaseKey('a24');">
  </map>
</div>
</body>
</html>